# 筋トレレビューアプリ 要件定義書 (v0.3 - MVP, ゲーミフィケーション要素追加)

## 1. 概要・背景

*   ユーザーは自身の筋力トレーニングの記録をメモ帳などで行っているが、「前回何をやったか」をすぐに確認しづらく、また日々の成長を実感しにくいという課題を感じている。
*   この課題を解決し、自身のトレーニング記録を容易に管理し、**日々の進捗をゲームのように楽しみながらモチベーションを維持できる**ことを目的として、本アプリケーションを開発する。

## 2. 目的

*   **ユーザーの課題解決:**
    *   過去のトレーニング記録を容易に確認できるようにする。
    *   **前回記録や自己ベストとの比較結果を分かりやすく表示**することで、成長を可視化する。
*   **トレーニングの質の向上とモチベーション維持:**
    *   記録の向上を「レベルアップ」のように表現することで、達成感を与え、トレーニング継続の意欲を高める。
    *   成長の度合いを把握しやすくすることで、次のトレーニングへの意欲に繋げる。
*   **MVPの達成:** まずはコアとなる価値（記録・閲覧・**成長フィードバック**）を最小限の機能で実現し、素早く利用開始できる状態を目指す。

## 3. ターゲットユーザー

*   **主なターゲット:** 開発者自身。
*   **想定されるユーザー像:**
    *   筋力トレーニングを継続的に行っている。
    *   トレーニング記録をつけている、またはつけたいと考えている。
    *   **日々の小さな成長を実感し、楽しみながらトレーニングを続けたい。**
    *   過去のトレーニング履歴を簡単に振り返りたい。

## 4. スコープ (MVP)

*   本要件定義は、MVP（Minimum Viable Product）として開発する範囲を定める。
*   MVPでは、以下の主要機能を実現する。
    *   筋トレ記録の入力とデータベースへの保存。
    *   保存された過去の記録の閲覧（リスト形式、グラフ形式）。
    *   **トレーニングセッションの結果（前回記録や自己ベストとの比較）をフィードバックとして表示する機能。**
*   ユーザー認証機能、複雑な分析機能、**AIによるレコメンデーション機能**、SNS連携機能などはMVPの範囲外とする。

## 5. 機能要件

| No. | 機能名                 | 機能概要                                                                                                             | 詳細                                                                                                                                                                                                                                                                                            | 優先度 (MVP) |
| :-: | :--------------------- | :------------------------------------------------------------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------: |
| F01 | 筋トレ記録入力         | トレーニング内容を入力し、データベースに保存する。                                                                         | ・入力項目: トレーニング実施日、種目名、重量(kg)、回数(reps)、セット数(sets)。<br>・任意項目: メモ。<br>・入力されたデータはSupabaseデータベースに保存される。                                                                                                                                      |      必須      |
| F02 | 過去記録閲覧 (リスト)  | 保存されたトレーニング記録を時系列や種目別にリスト形式で表示する。                                                         | ・日付範囲や種目名で絞り込み表示できる。<br>・「前回この種目をやったのはいつで、どんな内容だったか」をすぐに確認できる。                                                                                                                                                                             |      必須      |
| F03 | 過去記録閲覧 (グラフ)  | 特定の種目について、重量や回数の推移をグラフで可視化する。                                                               | ・種目を選択すると、実施日ごとの重量と回数の推移が折れ線グラフなどで表示される。<br>・成長の度合いを視覚的に把握できる。                                                                                                                                                                             |      必須      |
| **F04** | **成長フィードバック表示** | **トレーニングセッション終了後、ユーザー操作により、前回記録や自己ベストとの比較結果をゲーム風に表示する。**                           | **・トリガー:** ユーザーが「今日のトレーニング結果を見る」のようなボタンを押す。<br>**・比較ロジック:**<br>  - セッション中に入力された各種目について、直前の同種目記録と比較する。<br>  - 同時に、各種目の過去最高記録（重量、回数など、事前に定義した基準で）と比較する。<br>**・表示内容:**<br>  - **自己ベスト更新時:** 「自己ベスト更新！ スクワット 重量 +2.5kg (50kg -> 52.5kg) 🎉」のような特別なメッセージ。<br>  - **前回より向上時:** 「ナイス！ ベンチプレス 回数 +2回 (8回 -> 10回) 💪」のようなポジティブなメッセージと差分。<br>  - **前回と同じ/低下時:** 「スクワット 重量 維持 (50kg)。次回ファイト！🔥」や「デッドリフト 重量 -5kg (100kg -> 95kg)。お疲れ様でした☕️」のような短い励ましメッセージ。<br>**・表示形式:** ポップアップ、または画面内の専用エリアに表示。 |      必須      |
| **F05** | **基本的なUI**         | **上記機能(F01-F04)を利用するためのシンプルなWebインターフェースを提供する。**                                            | ・Streamlitを用いて構築する。<br>・記録入力フォーム、記録表示エリア、グラフ表示エリア。<br>・**成長フィードバック表示をトリガーするボタン。**<br>・フィードバック表示エリア/ポップアップ。                                                                                                                  |      必須      |

## 6. 非機能要件

| No. | 項目           | 要件                                                                       | 備考                                                                                             |
| :-: | :------------- | :------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------- |
| NF01| パフォーマンス   | ストレスなく日常的に利用できる程度の応答速度であること。                         | 厳密な目標値は定めないが、操作に対して数秒以上待たされることがないようにする。                       |
| NF02| セキュリティ     | SupabaseのAPIキーは適切に管理すること。                                      | Streamlit Secrets Management等を利用する。                                                       |
| NF03| 運用・保守     | Dockerコンテナとしてビルド可能であること。<br>Cloud Run上で安定稼働すること。エラー発生時にログ等で原因を特定できること。 | `Dockerfile` を作成し、コンテナイメージによるポータビリティと再現性を確保する。                    |
| NF04| コスト         | クラウドサービスの利用料を可能な限り低く抑えること（特に無料枠の活用）。     | Supabase, Cloud Runの無料枠/低価格帯を利用する。（LLM APIコストは不要に）                           |
| NF05| UI/UX          | MVPでは機能性を優先し、過度なデザインは施さない。直感的に操作できること。     | Streamlitの標準的なコンポーネントを中心に構成する。                                                |

## 7. 技術スタック/構成

*   **言語:** Python
*   **Webフレームワーク:** Streamlit
*   **データベース:** Supabase (PostgreSQL)
*   **コンテナ化:** Docker
*   **インフラ:** Google Cloud Run (デプロイ先、Dockerコンテナ実行環境), ローカル環境 (開発・テスト、Dockerコンテナ実行)
*   **ライブラリ:** `supabase-py`, データ操作ライブラリ (例: `pandas`), グラフ描画ライブラリ (例: `plotly`, `matplotlib`)
    *   **AI/LLM関連ライブラリは不要**

## 8. 将来的な拡張 (スコープ外)

*   ユーザー認証機能
*   トレーニングメニュー全体の提案機能
*   詳細な分析機能（ボリューム計算、部位別バランス分析など）
*   種目データベース（フォーム動画などへのリンク）
*   SNS連携、共有機能
*   （将来的には）AIによるアドバイス機能の追加検討

---

## 改訂履歴

| Version | Date       | Author | Changes                                                                 |
| :------ | :--------- | :----- | :---------------------------------------------------------------------- |
| **0.3** | **(今日の日付)** | Gemini | **AIレビュー機能を成長フィードバック機能に変更 (1, 2, 4, 5, 7項修正)** |
| 0.2     | (前回の日付) | Gemini | Dockerに関する記述を追加・修正 (NF03, 7項)                                |
| 0.1     | (前回の日付) | Gemini | 初版作成 (MVP要件定義)                                                 |